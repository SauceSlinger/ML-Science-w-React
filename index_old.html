<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Science Explorer - Interactive Machine Learning Guide</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ===== DATA GENERATORS =====
        const utils = {
            randomNormal: (mean = 0, std = 1) => {
                const u = Math.random();
                const v = Math.random();
                return mean + std * Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
            },
            
            randomBetween: (min, max) => Math.random() * (max - min) + min,
            
            addNoise: (value, noiseLevel = 0.1) => {
                return value + utils.randomNormal(0, noiseLevel);
            }
        };

        const generateVineyardData = (samples = 200) => {
            const data = [];
            
            for (let i = 0; i < samples; i++) {
                const rainfall = utils.randomBetween(15, 45);
                const temperature = utils.randomBetween(55, 75);
                const soilPH = utils.randomBetween(5.5, 8.0);
                
                const baseYield = 2 * rainfall + 1.5 * temperature - 3 * soilPH + 20;
                const yield_tons = Math.max(0, utils.addNoise(baseYield, 2));
                
                data.push({
                    id: i + 1,
                    rainfall: Math.round(rainfall * 10) / 10,
                    temperature: Math.round(temperature * 10) / 10,
                    soilPH: Math.round(soilPH * 100) / 100,
                    yield_tons: Math.round(yield_tons * 10) / 10,
                    year: 2015 + (i % 9)
                });
            }
            
            return data;
        };

        const generateDragonEggData = (samples = 300) => {
            const data = [];
            
            for (let i = 0; i < samples; i++) {
                const temperature = utils.randomBetween(1000, 1400);
                const magicalAura = utils.randomBetween(0, 100);
                const incubationDays = Math.floor(utils.randomBetween(30, 120));
                
                const logit = -8 + 0.008 * temperature + 0.05 * magicalAura + 0.01 * incubationDays;
                const hatchProbability = 1 / (1 + Math.exp(-logit));
                const hatched = Math.random() < hatchProbability;
                
                data.push({
                    id: i + 1,
                    temperature: Math.round(temperature),
                    magicalAura: Math.round(magicalAura * 10) / 10,
                    incubationDays,
                    hatched,
                    eggType: ['Fire', 'Ice', 'Earth', 'Air'][Math.floor(Math.random() * 4)]
                });
            }
            
            return data;
        };

        const generateRetailCustomerData = (samples = 300) => {
            const data = [];
            const segments = [
                { name: 'Budget Buyers', avgSpend: 50, frequency: 2 },
                { name: 'Luxury Seekers', avgSpend: 300, frequency: 1 },
                { name: 'Impulse Shoppers', avgSpend: 120, frequency: 4 },
                { name: 'Regular Shoppers', avgSpend: 80, frequency: 3 },
                { name: 'Occasion Buyers', avgSpend: 200, frequency: 0.5 }
            ];
            
            for (let i = 0; i < samples; i++) {
                const segment = segments[Math.floor(Math.random() * segments.length)];
                
                const monthlySpend = Math.max(10, utils.randomNormal(segment.avgSpend, segment.avgSpend * 0.3));
                const purchaseFrequency = Math.max(0.1, utils.randomNormal(segment.frequency, segment.frequency * 0.4));
                const sessionDuration = utils.randomBetween(2, 45);
                const itemsPerPurchase = Math.max(1, Math.floor(utils.randomNormal(3, 2)));
                
                data.push({
                    id: i + 1,
                    monthlySpend: Math.round(monthlySpend),
                    purchaseFrequency: Math.round(purchaseFrequency * 10) / 10,
                    sessionDuration: Math.round(sessionDuration),
                    itemsPerPurchase,
                    segment: segment.name,
                    age: Math.floor(utils.randomBetween(18, 70)),
                    membershipYears: Math.floor(utils.randomBetween(0, 10))
                });
            }
            
            return data;
        };

        const dataGenerators = {
            vineyard: generateVineyardData,
            dragonEgg: generateDragonEggData,
            retail: generateRetailCustomerData
        };

        // ===== CHART COMPONENTS =====
        const chartUtils = {
            colors: {
                primary: '#667eea',
                secondary: '#764ba2',
                success: '#10b981',
                warning: '#f59e0b',
                danger: '#ef4444',
                info: '#3b82f6',
                purple: '#8b5cf6',
                pink: '#ec4899',
                teal: '#14b8a6',
                orange: '#f97316'
            },
            
            generateColorPalette: (count) => {
                const colors = Object.values(chartUtils.colors);
                return Array.from({ length: count }, (_, i) => colors[i % colors.length]);
            },
            
            addAlpha: (color, alpha = 0.2) => {
                if (color.startsWith('#')) {
                    const r = parseInt(color.slice(1, 3), 16);
                    const g = parseInt(color.slice(3, 5), 16);
                    const b = parseInt(color.slice(5, 7), 16);
                    return `rgba(${r}, ${g}, ${b}, ${alpha})`;
                }
                return color;
            }
        };

        function ScatterPlot({ data, xField, yField, colorField, title, xLabel, yLabel, canvasId }) {
            React.useEffect(() => {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                if (window[`chart_${canvasId}`]) {
                    window[`chart_${canvasId}`].destroy();
                }
                
                const datasets = [];
                
                if (colorField) {
                    const groups = {};
                    data.forEach(point => {
                        const group = point[colorField];
                        if (!groups[group]) groups[group] = [];
                        groups[group].push(point);
                    });
                    
                    const colors = chartUtils.generateColorPalette(Object.keys(groups).length);
                    
                    Object.keys(groups).forEach((group, index) => {
                        datasets.push({
                            label: group,
                            data: groups[group].map(point => ({
                                x: point[xField],
                                y: point[yField]
                            })),
                            backgroundColor: chartUtils.addAlpha(colors[index], 0.6),
                            borderColor: colors[index],
                            borderWidth: 1
                        });
                    });
                } else {
                    datasets.push({
                        label: 'Data Points',
                        data: data.map(point => ({
                            x: point[xField],
                            y: point[yField]
                        })),
                        backgroundColor: chartUtils.addAlpha(chartUtils.colors.primary, 0.6),
                        borderColor: chartUtils.colors.primary,
                        borderWidth: 1
                    });
                }
                
                window[`chart_${canvasId}`] = new Chart(ctx, {
                    type: 'scatter',
                    data: { datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: title,
                                font: { size: 16, weight: 'bold' }
                            },
                            legend: {
                                display: !!colorField
                            }
                        },
                        scales: {
                            x: {
                                display: true,
                                title: {
                                    display: true,
                                    text: xLabel
                                }
                            },
                            y: {
                                display: true,
                                title: {
                                    display: true,
                                    text: yLabel
                                }
                            }
                        }
                    }
                });
                
                return () => {
                    if (window[`chart_${canvasId}`]) {
                        window[`chart_${canvasId}`].destroy();
                    }
                };
            }, [data, xField, yField, colorField, title, xLabel, yLabel, canvasId]);
            
            return React.createElement('div', { 
                className: 'relative h-80 w-full'
            }, React.createElement('canvas', { 
                id: canvasId,
                className: 'w-full h-full'
            }));
        }

        function PieChart({ data, labelField, valueField, title, canvasId }) {
            React.useEffect(() => {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                if (window[`chart_${canvasId}`]) {
                    window[`chart_${canvasId}`].destroy();
                }
                
                const labels = data.map(item => item[labelField]);
                const values = data.map(item => item[valueField]);
                const colors = chartUtils.generateColorPalette(data.length);
                
                window[`chart_${canvasId}`] = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels,
                        datasets: [{
                            data: values,
                            backgroundColor: colors.map(color => chartUtils.addAlpha(color, 0.7)),
                            borderColor: colors,
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: title,
                                font: { size: 16, weight: 'bold' }
                            },
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }, [data, labelField, valueField, title, canvasId]);
            
            return React.createElement('div', { 
                className: 'relative h-80 w-full'
            }, React.createElement('canvas', { 
                id: canvasId,
                className: 'w-full h-full'
            }));
        }

        // ===== ML EXAMPLE PAGE TEMPLATE =====
        function MLExamplePage({ 
            title, 
            description, 
            algorithm, 
            category,
            icon,
            data, 
            charts, 
            keyPoints, 
            useCases,
            onBack 
        }) {
            const [selectedTab, setSelectedTab] = React.useState('overview');
            const [dataPageSize, setDataPageSize] = React.useState(20);
            const [currentDataPage, setCurrentDataPage] = React.useState(0);
            
            const getCategoryColor = (category) => {
                switch (category) {
                    case 'Supervised':
                        return {
                            bg: 'bg-blue-100',
                            border: 'border-blue-500',
                            text: 'text-blue-700',
                            badge: 'bg-blue-500'
                        };
                    case 'Unsupervised':
                        return {
                            bg: 'bg-green-100',
                            border: 'border-green-500',
                            text: 'text-green-700',
                            badge: 'bg-green-500'
                        };
                    case 'RL':
                        return {
                            bg: 'bg-purple-100',
                            border: 'border-purple-500',
                            text: 'text-purple-700',
                            badge: 'bg-purple-500'
                        };
                    default:
                        return {
                            bg: 'bg-gray-100',
                            border: 'border-gray-500',
                            text: 'text-gray-700',
                            badge: 'bg-gray-500'
                        };
                }
            };
            
            const colors = getCategoryColor(category);
            
            const startIndex = currentDataPage * dataPageSize;
            const endIndex = startIndex + dataPageSize;
            const paginatedData = data.slice(startIndex, endIndex);
            const totalPages = Math.ceil(data.length / dataPageSize);
            
            const tabs = [
                { id: 'overview', label: 'Overview', icon: 'ðŸ“Š' },
                { id: 'data', label: 'Data', icon: 'ðŸ’¾' },
                { id: 'visualization', label: 'Visualization', icon: 'ðŸ“ˆ' },
                { id: 'insights', label: 'Insights', icon: 'ðŸ’¡' }
            ];
            
            const renderOverview = () => React.createElement('div', { 
                className: 'space-y-6'
            }, [
                React.createElement('div', {
                    key: 'algo-info',
                    className: `${colors.bg} rounded-lg p-6 border-l-4 ${colors.border}`
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: 'flex items-center gap-3 mb-4'
                    }, [
                        React.createElement('span', { key: 'icon', className: 'text-4xl' }, icon),
                        React.createElement('div', { key: 'title-section' }, [
                            React.createElement('h2', {
                                key: 'title',
                                className: `text-2xl font-bold ${colors.text}`
                            }, title),
                            React.createElement('span', {
                                key: 'badge',
                                className: `${colors.badge} text-white text-sm font-bold px-3 py-1 rounded-full`
                            }, `${category} Learning`)
                        ])
                    ]),
                    React.createElement('p', {
                        key: 'description',
                        className: 'text-gray-700 text-lg leading-relaxed'
                    }, description)
                ]),
                
                React.createElement('div', {
                    key: 'key-points',
                    className: 'bg-white rounded-lg p-6 shadow-md'
                }, [
                    React.createElement('h3', {
                        key: 'kp-title',
                        className: 'text-xl font-semibold mb-4 flex items-center gap-2'
                    }, ['âœ¨ Key Points']),
                    React.createElement('ul', {
                        key: 'kp-list',
                        className: 'space-y-3'
                    }, keyPoints.map((point, index) => 
                        React.createElement('li', {
                            key: index,
                            className: 'flex items-start gap-3'
                        }, [
                            React.createElement('span', {
                                key: 'bullet',
                                className: `${colors.text} font-bold`
                            }, 'â€¢'),
                            React.createElement('span', {
                                key: 'text',
                                className: 'text-gray-700'
                            }, point)
                        ])
                    ))
                ])
            ]);
            
            const renderDataTable = () => {
                if (!data || data.length === 0) {
                    return React.createElement('div', {
                        className: 'text-center py-8 text-gray-500'
                    }, 'No data available');
                }
                
                const columns = Object.keys(data[0]);
                
                return React.createElement('div', {
                    className: 'bg-white rounded-lg shadow-md overflow-hidden'
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: 'px-6 py-4 bg-gray-50 border-b'
                    }, [
                        React.createElement('h3', {
                            key: 'title',
                            className: 'text-lg font-semibold'
                        }, 'ðŸ’¾ Raw Data'),
                        React.createElement('p', {
                            key: 'info',
                            className: 'text-sm text-gray-600 mt-1'
                        }, `Showing ${startIndex + 1}-${Math.min(endIndex, data.length)} of ${data.length} records`)
                    ]),
                    
                    React.createElement('div', {
                        key: 'table-container',
                        className: 'overflow-x-auto'
                    }, 
                        React.createElement('table', {
                            className: 'w-full'
                        }, [
                            React.createElement('thead', {
                                key: 'thead',
                                className: 'bg-gray-100'
                            }, 
                                React.createElement('tr', {}, 
                                    columns.map(column => 
                                        React.createElement('th', {
                                            key: column,
                                            className: 'px-4 py-3 text-left text-sm font-medium text-gray-700'
                                        }, column)
                                    )
                                )
                            ),
                            React.createElement('tbody', {
                                key: 'tbody',
                                className: 'divide-y divide-gray-200'
                            }, 
                                paginatedData.map((row, index) => 
                                    React.createElement('tr', {
                                        key: index,
                                        className: 'hover:bg-gray-50'
                                    }, 
                                        columns.map(column => 
                                            React.createElement('td', {
                                                key: column,
                                                className: 'px-4 py-3 text-sm text-gray-900'
                                            }, 
                                                typeof row[column] === 'boolean' ? 
                                                    (row[column] ? 'âœ…' : 'âŒ') :
                                                    typeof row[column] === 'number' ? 
                                                        row[column].toFixed(2) :
                                                        String(row[column])
                                            )
                                        )
                                    )
                                )
                            )
                        ])
                    )
                ]);
            };
            
            const renderVisualization = () => React.createElement('div', {
                className: 'space-y-6'
            }, [
                React.createElement('div', {
                    key: 'viz-header',
                    className: 'bg-white rounded-lg p-6 shadow-md'
                }, [
                    React.createElement('h3', {
                        key: 'title',
                        className: 'text-xl font-semibold mb-2'
                    }, 'ðŸ“ˆ Interactive Visualizations'),
                    React.createElement('p', {
                        key: 'desc',
                        className: 'text-gray-600'
                    }, 'Explore the data through various chart types and identify patterns.')
                ]),
                
                ...charts.map((chart, index) => 
                    React.createElement('div', {
                        key: index,
                        className: 'bg-white rounded-lg p-6 shadow-md'
                    }, [
                        React.createElement('h4', {
                            key: 'chart-title',
                            className: 'text-lg font-medium mb-4 text-gray-800'
                        }, chart.title),
                        chart.component
                    ])
                )
            ]);
            
            const renderInsights = () => React.createElement('div', {
                className: 'space-y-6'
            }, [
                React.createElement('div', {
                    key: 'algo-insights',
                    className: 'bg-white rounded-lg p-6 shadow-md'
                }, [
                    React.createElement('h3', {
                        key: 'title',
                        className: 'text-xl font-semibold mb-4 flex items-center gap-2'
                    }, ['ðŸ§  Algorithm Insights']),
                    React.createElement('div', {
                        key: 'content',
                        className: 'prose max-w-none text-gray-700'
                    }, [
                        React.createElement('p', {
                            key: 'p1'
                        }, `This ${algorithm} model demonstrates ${category.toLowerCase()} learning principles by analyzing the provided dataset.`),
                        React.createElement('p', {
                            key: 'p2'
                        }, `The visualization reveals patterns and relationships that the algorithm uses to make predictions or discoveries.`),
                        React.createElement('p', {
                            key: 'p3'
                        }, 'Observe how different features contribute to the model\'s decision-making process through the interactive charts.')
                    ])
                ])
            ]);
            
            const renderTabContent = () => {
                switch (selectedTab) {
                    case 'overview': return renderOverview();
                    case 'data': return renderDataTable();
                    case 'visualization': return renderVisualization();
                    case 'insights': return renderInsights();
                    default: return renderOverview();
                }
            };
            
            return React.createElement('div', {
                className: 'min-h-screen bg-gray-50'
            }, [
                React.createElement('header', {
                    key: 'header',
                    className: 'bg-white shadow-sm border-b'
                }, 
                    React.createElement('div', {
                        className: 'container mx-auto px-4 py-4'
                    }, 
                        React.createElement('div', {
                            className: 'flex items-center gap-4'
                        }, [
                            React.createElement('button', {
                                key: 'back-btn',
                                onClick: onBack,
                                className: 'flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors'
                            }, ['â† Back to Examples']),
                            
                            React.createElement('div', {
                                key: 'title-section',
                                className: 'flex items-center gap-3'
                            }, [
                                React.createElement('span', {
                                    key: 'icon',
                                    className: 'text-3xl'
                                }, icon),
                                React.createElement('h1', {
                                    key: 'title',
                                    className: 'text-2xl font-bold text-gray-800'
                                }, title)
                            ])
                        ])
                    )
                ),
                
                React.createElement('nav', {
                    key: 'nav',
                    className: 'bg-white shadow-sm'
                }, 
                    React.createElement('div', {
                        className: 'container mx-auto px-4'
                    }, 
                        React.createElement('div', {
                            className: 'flex space-x-8'
                        }, 
                            tabs.map(tab => 
                                React.createElement('button', {
                                    key: tab.id,
                                    onClick: () => setSelectedTab(tab.id),
                                    className: `flex items-center gap-2 px-3 py-4 border-b-2 font-medium text-sm transition-colors ${
                                        selectedTab === tab.id ? 
                                            `${colors.border.replace('border-', 'border-b-')} ${colors.text}` : 
                                            'border-transparent text-gray-500 hover:text-gray-700'
                                    }`
                                }, [`${tab.icon} ${tab.label}`])
                            )
                        )
                    )
                ),
                
                React.createElement('main', {
                    key: 'main',
                    className: 'container mx-auto px-4 py-8'
                }, renderTabContent())
            ]);
        }

        // ===== ML MODULES CONTENT DATA =====
        const mlModulesContent = [
            {
                id: 1,
                category: "Supervised",
                title: "Vineyard Yield Predictor",
                description: "A wine estate in Napa Valley uses linear regression to forecast annual grape harvest based on rainfall, temperature, and soil pH levels.",
                algorithm: "Linear Regression",
                useCases: ["Predicting tons of grapes per acre", "Optimizing irrigation schedules", "Planning production capacity"],
                keyPoints: [
                    "Simple and interpretable model",
                    "Works well with continuous variables",
                    "Weather data most influential factor"
                ],
                icon: "ðŸ‡"
            },
            {
                id: 2,
                category: "Supervised",
                title: "Dragon Egg Hatching Classifier",
                description: "In a fantasy realm, dragon breeders use logistic regression to predict if an egg will hatch based on incubation temperature and magical aura readings.",
                algorithm: "Logistic Regression",
                useCases: ["Determining viable eggs (hatch/no-hatch)", "Optimizing incubation conditions", "Resource allocation for care"],
                keyPoints: [
                    "Binary outcome prediction",
                    "Probability-based decisions",
                    "Temperature threshold at 1,200Â°F critical"
                ],
                icon: "ðŸ‰"
            },
            {
                id: 7,
                category: "Unsupervised",
                title: "Retail Customer Segmentation",
                description: "A global retailer uses K-Means to group shoppers into personas (budget buyers, luxury seekers, impulse shoppers) based on purchase behavior.",
                algorithm: "K-Means Clustering",
                useCases: ["Targeted marketing campaigns", "Store layout optimization", "Inventory planning by segment"],
                keyPoints: [
                    "Discovered 5 distinct customer types",
                    "Updated quarterly for seasonality",
                    "Drives 23% increase in conversion"
                ],
                icon: "ðŸ›ï¸"
            }
        ];

        // ===== MAIN APP COMPONENT =====
        function MLRulesViewer() {
            const [selectedCategory, setSelectedCategory] = useState('All');
            const [searchTerm, setSearchTerm] = useState('');
            const [expandedCard, setExpandedCard] = useState(null);
            const [currentView, setCurrentView] = useState('home');
            const [selectedExample, setSelectedExample] = useState(null);

            const categories = ['All', 'Supervised', 'Unsupervised', 'RL'];

            const getCategoryColor = (category) => {
                switch (category) {
                    case 'Supervised':
                        return {
                            bg: 'bg-blue-100',
                            border: 'border-blue-500',
                            text: 'text-blue-700',
                            badge: 'bg-blue-500',
                            hover: 'hover:bg-blue-50'
                        };
                    case 'Unsupervised':
                        return {
                            bg: 'bg-green-100',
                            border: 'border-green-500',
                            text: 'text-green-700',
                            badge: 'bg-green-500',
                            hover: 'hover:bg-green-50'
                        };
                    case 'RL':
                        return {
                            bg: 'bg-purple-100',
                            border: 'border-purple-500',
                            text: 'text-purple-700',
                            badge: 'bg-purple-500',
                            hover: 'hover:bg-purple-50'
                        };
                    default:
                        return {
                            bg: 'bg-gray-100',
                            border: 'border-gray-500',
                            text: 'text-gray-700',
                            badge: 'bg-gray-500',
                            hover: 'hover:bg-gray-50'
                        };
                }
            };

            const filteredModules = mlModulesContent.filter(module => {
                const matchesCategory = selectedCategory === 'All' || module.category === selectedCategory;
                const matchesSearch = module.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    module.description.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            const getCategoryStats = () => {
                const supervised = mlModulesContent.filter(m => m.category === 'Supervised').length;
                const unsupervised = mlModulesContent.filter(m => m.category === 'Unsupervised').length;
                const rl = mlModulesContent.filter(m => m.category === 'RL').length;
                return { supervised, unsupervised, rl };
            };

            const stats = getCategoryStats();

            const handleExampleClick = (example) => {
                setSelectedExample(example);
                setCurrentView('example');
            };

            const handleBackToHome = () => {
                setCurrentView('home');
                setSelectedExample(null);
            };

            if (currentView === 'example' && selectedExample) {
                return React.createElement(MLExamplePageWrapper, {
                    example: selectedExample,
                    onBack: handleBackToHome
                });
            }

            return React.createElement('div', {
                className: 'min-h-screen bg-gray-50'
            }, [
                React.createElement('header', {
                    key: 'header',
                    className: 'gradient-bg text-white shadow-lg'
                }, 
                    React.createElement('div', {
                        className: 'container mx-auto px-4 py-8 sm:py-12'
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: 'text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-3'
                        }, 'ðŸ¤– ML Science Explorer'),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: 'text-center text-sm sm:text-base md:text-lg opacity-90 max-w-2xl mx-auto'
                        }, 'Your interactive guide to Machine Learning algorithms and applications'),
                        
                        React.createElement('div', {
                            key: 'stats',
                            className: 'mt-6 grid grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto'
                        }, [
                            React.createElement('div', {
                                key: 'supervised',
                                className: 'bg-white bg-opacity-20 rounded-lg p-3 text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'count',
                                    className: 'text-xl sm:text-2xl font-bold'
                                }, stats.supervised),
                                React.createElement('div', {
                                    key: 'label',
                                    className: 'text-xs sm:text-sm opacity-90'
                                }, 'Supervised')
                            ]),
                            React.createElement('div', {
                                key: 'unsupervised',
                                className: 'bg-white bg-opacity-20 rounded-lg p-3 text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'count',
                                    className: 'text-xl sm:text-2xl font-bold'
                                }, stats.unsupervised),
                                React.createElement('div', {
                                    key: 'label',
                                    className: 'text-xs sm:text-sm opacity-90'
                                }, 'Unsupervised')
                            ]),
                            React.createElement('div', {
                                key: 'rl',
                                className: 'bg-white bg-opacity-20 rounded-lg p-3 text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'count',
                                    className: 'text-xl sm:text-2xl font-bold'
                                }, stats.rl),
                                React.createElement('div', {
                                    key: 'label',
                                    className: 'text-xs sm:text-sm opacity-90'
                                }, 'Reinforcement')
                            ])
                        ])
                    ])
                ),

                React.createElement('div', {
                    key: 'controls',
                    className: 'sticky top-0 bg-white shadow-md z-10'
                }, 
                    React.createElement('div', {
                        className: 'container mx-auto px-4 py-4'
                    }, [
                        React.createElement('div', {
                            key: 'search',
                            className: 'mb-4'
                        }, 
                            React.createElement('input', {
                                type: 'text',
                                placeholder: 'ðŸ” Search algorithms...',
                                value: searchTerm,
                                onChange: (e) => setSearchTerm(e.target.value),
                                className: 'w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none transition-colors text-sm sm:text-base'
                            })
                        ),

                        React.createElement('div', {
                            key: 'filters',
                            className: 'flex flex-wrap gap-2'
                        }, 
                            categories.map(category => {
                                const colors = getCategoryColor(category === 'All' ? 'default' : category);
                                const isActive = selectedCategory === category;
                                return React.createElement('button', {
                                    key: category,
                                    onClick: () => setSelectedCategory(category),
                                    className: `px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-semibold text-xs sm:text-sm transition-all ${
                                        isActive
                                            ? `${colors.badge} text-white shadow-md`
                                            : `${colors.bg} ${colors.text} ${colors.hover}`
                                    }`
                                }, [
                                    category,
                                    category !== 'All' && React.createElement('span', {
                                        key: 'count',
                                        className: 'ml-2 opacity-75'
                                    }, `(${category === 'Supervised' ? stats.supervised : 
                                         category === 'Unsupervised' ? stats.unsupervised : 
                                         stats.rl})`)
                                ]);
                            })
                        )
                    ])
                ),

                React.createElement('main', {
                    key: 'main',
                    className: 'container mx-auto px-4 py-8'
                }, 
                    filteredModules.length === 0 ? 
                        React.createElement('div', {
                            className: 'text-center py-12'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'text-6xl mb-4'
                            }, 'ðŸ”'),
                            React.createElement('h3', {
                                key: 'title',
                                className: 'text-xl sm:text-2xl font-semibold text-gray-700 mb-2'
                            }, 'No algorithms found'),
                            React.createElement('p', {
                                key: 'desc',
                                className: 'text-gray-500'
                            }, 'Try adjusting your search or filter criteria')
                        ]) :
                        React.createElement('div', {
                            className: 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6'
                        }, 
                            filteredModules.map((module, index) => {
                                const colors = getCategoryColor(module.category);
                                
                                return React.createElement('div', {
                                    key: module.id,
                                    className: `bg-white rounded-xl shadow-md border-l-4 ${colors.border} card-hover fade-in overflow-hidden cursor-pointer`,
                                    style: { animationDelay: `${index * 0.05}s` },
                                    onClick: () => handleExampleClick(module)
                                }, [
                                    React.createElement('div', {
                                        key: 'header',
                                        className: `${colors.bg} p-4`
                                    }, 
                                        React.createElement('div', {
                                            className: 'flex items-start justify-between'
                                        }, 
                                            React.createElement('div', {
                                                className: 'flex-1'
                                            }, [
                                                React.createElement('div', {
                                                    key: 'badges',
                                                    className: 'flex items-center gap-2 mb-2'
                                                }, [
                                                    React.createElement('span', {
                                                        key: 'icon',
                                                        className: 'text-3xl'
                                                    }, module.icon),
                                                    React.createElement('span', {
                                                        key: 'badge',
                                                        className: `${colors.badge} text-white text-xs font-bold px-2 py-1 rounded`
                                                    }, module.category)
                                                ]),
                                                React.createElement('h3', {
                                                    key: 'title',
                                                    className: `text-lg sm:text-xl font-bold ${colors.text}`
                                                }, module.title)
                                            ])
                                        )
                                    ),

                                    React.createElement('div', {
                                        key: 'body',
                                        className: 'p-4'
                                    }, [
                                        React.createElement('p', {
                                            key: 'description',
                                            className: 'text-gray-700 text-sm sm:text-base mb-4'
                                        }, module.description),

                                        React.createElement('div', {
                                            key: 'key-points',
                                            className: 'mb-4'
                                        }, [
                                            React.createElement('h4', {
                                                key: 'kp-title',
                                                className: 'font-semibold text-gray-900 mb-2 text-sm'
                                            }, 'âœ¨ Key Points:'),
                                            React.createElement('ul', {
                                                key: 'kp-list',
                                                className: 'space-y-1'
                                            }, 
                                                module.keyPoints.slice(0, 2).map((point, idx) =>
                                                    React.createElement('li', {
                                                        key: idx,
                                                        className: 'text-xs sm:text-sm text-gray-600 flex items-start'
                                                    }, [
                                                        React.createElement('span', {
                                                            key: 'bullet',
                                                            className: `${colors.text} mr-2`
                                                        }, 'â€¢'),
                                                        point
                                                    ])
                                                )
                                            )
                                        ]),

                                        React.createElement('div', {
                                            key: 'cta',
                                            className: 'mt-4'
                                        }, 
                                            React.createElement('button', {
                                                className: `w-full text-center font-semibold text-sm ${colors.text} ${colors.hover} p-2 rounded transition-colors flex items-center justify-center gap-2`
                                            }, [
                                                React.createElement('span', { key: 'text' }, 'ðŸ“Š View Interactive Example'),
                                                React.createElement('span', { key: 'arrow' }, 'â†’')
                                            ])
                                        )
                                    ])
                                ]);
                            })
                        )
                )
            ]);
        }

        // ===== ML EXAMPLE PAGE WRAPPER =====
        function MLExamplePageWrapper({ example, onBack }) {
            const [data, setData] = useState([]);
            const [charts, setCharts] = useState([]);

            useEffect(() => {
                generateExampleData(example);
            }, [example]);

            const generateExampleData = (example) => {
                let generatedData = [];
                let generatedCharts = [];

                try {
                    switch (example.id) {
                        case 1: // Vineyard
                            generatedData = dataGenerators.vineyard(200);
                            generatedCharts = [
                                {
                                    title: "Yield vs Rainfall Correlation",
                                    component: React.createElement(ScatterPlot, {
                                        data: generatedData,
                                        xField: 'rainfall',
                                        yField: 'yield_tons',
                                        title: 'Vineyard Yield vs Rainfall',
                                        xLabel: 'Rainfall (inches)',
                                        yLabel: 'Yield (tons per acre)',
                                        canvasId: 'vineyard-scatter-1'
                                    })
                                },
                                {
                                    title: "Temperature Impact Analysis",
                                    component: React.createElement(ScatterPlot, {
                                        data: generatedData,
                                        xField: 'temperature',
                                        yField: 'yield_tons',
                                        title: 'Yield vs Temperature',
                                        xLabel: 'Average Temperature (Â°F)',
                                        yLabel: 'Yield (tons per acre)',
                                        canvasId: 'vineyard-scatter-2'
                                    })
                                }
                            ];
                            break;

                        case 2: // Dragon Egg
                            generatedData = dataGenerators.dragonEgg(300);
                            generatedCharts = [
                                {
                                    title: "Hatching Success by Temperature",
                                    component: React.createElement(ScatterPlot, {
                                        data: generatedData,
                                        xField: 'temperature',
                                        yField: 'magicalAura',
                                        colorField: 'hatched',
                                        title: 'Dragon Egg Hatching Patterns',
                                        xLabel: 'Temperature (Â°F)',
                                        yLabel: 'Magical Aura',
                                        canvasId: 'dragon-scatter-1'
                                    })
                                }
                            ];
                            break;

                        case 7: // Retail Customer Segmentation
                            generatedData = dataGenerators.retail(300);
                            const segmentCounts = generatedData.reduce((acc, customer) => {
                                acc[customer.segment] = (acc[customer.segment] || 0) + 1;
                                return acc;
                            }, {});
                            
                            const segmentData = Object.entries(segmentCounts).map(([segment, count]) => ({
                                segment,
                                count
                            }));

                            generatedCharts = [
                                {
                                    title: "Customer Segment Distribution",
                                    component: React.createElement(PieChart, {
                                        data: segmentData,
                                        labelField: 'segment',
                                        valueField: 'count',
                                        title: 'Customer Segments',
                                        canvasId: 'retail-pie-1'
                                    })
                                },
                                {
                                    title: "Spending vs Purchase Frequency",
                                    component: React.createElement(ScatterPlot, {
                                        data: generatedData,
                                        xField: 'monthlySpend',
                                        yField: 'purchaseFrequency',
                                        colorField: 'segment',
                                        title: 'Customer Behavior Patterns',
                                        xLabel: 'Monthly Spend ($)',
                                        yLabel: 'Purchase Frequency',
                                        canvasId: 'retail-scatter-1'
                                    })
                                }
                            ];
                            break;

                        default:
                            generatedData = dataGenerators.vineyard(100);
                            generatedCharts = [
                                {
                                    title: "Sample Visualization",
                                    component: React.createElement('div', {
                                        className: 'bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-8 text-center border-2 border-dashed border-gray-300'
                                    }, [
                                        React.createElement('div', {
                                            key: 'icon',
                                            className: 'text-6xl mb-4'
                                        }, 'ðŸš§'),
                                        React.createElement('h3', {
                                            key: 'title',
                                            className: 'text-xl font-semibold text-gray-700 mb-2'
                                        }, 'Interactive Chart Coming Soon'),
                                        React.createElement('p', {
                                            key: 'desc',
                                            className: 'text-gray-500'
                                        }, `Full visualization for ${example.title} is under development. Explore the data in the Data tab!`)
                                    ])
                                }
                            ];
                    }

                    setData(generatedData);
                    setCharts(generatedCharts);
                } catch (error) {
                    console.error('Error generating data for example:', error);
                    setData([]);
                    setCharts([]);
                }
            };

            return React.createElement(MLExamplePage, {
                title: example.title,
                description: example.description,
                algorithm: example.algorithm,
                category: example.category,
                icon: example.icon,
                data: data,
                charts: charts,
                keyPoints: example.keyPoints,
                useCases: example.useCases,
                onBack: onBack
            });
        }

        // ===== RENDER APP =====
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(MLRulesViewer));
    </script>
</body>
</html>